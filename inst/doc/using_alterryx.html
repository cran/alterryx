<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Michael Treadwell" />

<meta name="date" content="2018-06-05" />

<title>Using alterryx</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Using alterryx</h1>
<h4 class="author"><em>Michael Treadwell</em></h4>
<h4 class="date"><em>2018-06-05</em></h4>



<p><code>alterryx</code> provides access to each of the Alteryx Gallery API endpoints. With <code>alterryx</code> users can:</p>
<ul>
<li><p>Retrieve information on Alteryx Gallery resouces like apps, workflows, and macros</p></li>
<li><p>Queue jobs for applications</p></li>
<li><p>Retrieve the status and output of jobs</p></li>
</ul>
<p>In order to use this package, you will need to have <a href="https://community.alteryx.com/t5/Alteryx-Knowledge-Base/Private-Gallery-API-Key-and-Secret/ta-p/22009">a private gallery API key and secret</a></p>
<div id="setup" class="section level2">
<h2>Setup</h2>
<p>Once you have obtained your API key and secret set them as global options. Though it is not necessary, it will save you typing later if you also set your Alteryx Gallery URL as an option.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">alteryx_api_key &lt;-<span class="st"> &quot;ALTERYX_API_KEY&quot;</span>
alteryx_secret_key &lt;-<span class="st"> &quot;ALTERYX_API_SECRET&quot;</span>
alteryx_gallery &lt;-<span class="st"> &quot;https://yourgallery.com/gallery&quot;</span>

<span class="kw">options</span>(<span class="dt">alteryx_api_key =</span> alteryx_api_key)
<span class="kw">options</span>(<span class="dt">alteryx_secret_key =</span> alteryx_secret_key)
<span class="kw">options</span>(<span class="dt">alteryx_gallery =</span> alteryx_gallery)</code></pre></div>
</div>
<div id="your-apps" class="section level2">
<h2>Your Apps</h2>
<p>Access to Alteryx Gallery resources like workflows, applications, and macros are managed through studios. Your account has a subscription id which determines what you can access. For the purpose of this package, when you see the term ‘resource’ that can refer to anything published to the Alteryx Gallery like workflows, applications, and macros. When you see ‘application’ or ‘app’ it specifically refers to files with the extension <em>.yxwz</em> that are published to your Gallery.</p>
<p>The resources you can access are obtained using <code>get_app</code>.</p>
<div id="search-apps" class="section level3">
<h3>Search Apps</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">subscription &lt;-<span class="st"> </span><span class="kw">get_app</span>()</code></pre></div>
<p>You now have a <code>list</code> containing all of the resources you can access. If you are a power user, this is probably going to be a long list. To pare down the list use the <code>request_params</code> parameter.</p>
<p>If you wanted to see only the five most recently uploaded resources, you can use the <code>limit</code> and <code>sortField</code> parameters.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">request_params &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">limit =</span> <span class="st">&quot;5&quot;</span>,
  <span class="dt">sortField =</span> <span class="st">&quot;uploaddate&quot;</span>
)

subscription &lt;-<span class="st"> </span><span class="kw">get_app</span>(request_params)</code></pre></div>
</div>
<div id="non-applications" class="section level3">
<h3>Non-applications</h3>
<p>There is a reason to differentiate between ‘resources’ and ‘apps’. <code>get_app</code> will return all resources that you can access via your subscription that match the search parameters. However, only ‘apps’ can be used with the rest of the API functions. To make sure that <code>get_app</code> only returns apps, use <code>packageType = &quot;0&quot;</code> as a request parameter.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">request_params &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">packageType =</span> <span class="st">&quot;0&quot;</span>,
  <span class="dt">limit =</span> <span class="st">&quot;5&quot;</span>,
  <span class="dt">sortField =</span> <span class="st">&quot;uploaddate&quot;</span>
)

subscription &lt;-<span class="st"> </span><span class="kw">get_app</span>(request_params)</code></pre></div>
</div>
<div id="search-apps-by-name" class="section level3">
<h3>Search Apps by Name</h3>
<p>If you are looking for a specific app, it might be easiest to simply search for it by name. Lets say we are looking for an application named “api_tester.yxwz”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">request_params &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">packageType =</span> <span class="st">&quot;0&quot;</span>,
  <span class="dt">search =</span> <span class="st">&quot;api&quot;</span>
)

subscriptions &lt;-<span class="st"> </span><span class="kw">get_app</span>(request_params)
app &lt;-<span class="st"> </span>subscriptions[[<span class="dv">1</span>]]</code></pre></div>
<p>In this case, the app I was looking for was the first result in the list.</p>
</div>
<div id="download-a-specific-app" class="section level3">
<h3>Download a Specific App</h3>
<p>If you would like to work with the application in Alteryx, you can use <code>doanload_app</code> to download the application as a <em>.yxzp</em> file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">download_app</span>(app)</code></pre></div>
</div>
</div>
<div id="queueing-a-job" class="section level2">
<h2>Queueing a Job</h2>
<p>Now that I have the app I want, I want to queue a job for it. A ‘job’ is one run, a single iteration of an app.</p>
<div id="app-questions" class="section level3">
<h3>App Questions</h3>
<p>Most of the time, applications have questions that must be answered in order for the app to run. For example, an app that performs trade area analysis might ask you to specify a radius for the trade area. These questions are set by the app author when they create the application in Alteryx Designer. My app, “api_tester.yxwz” has a single question: “How long should this application run?”</p>
<p>If you don’t have your app questions memorized, use <code>get_app_questions</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">questions &lt;-<span class="st"> </span><span class="kw">get_app_questions</span>(app)</code></pre></div>
</div>
<div id="build-the-answers" class="section level3">
<h3>Build the Answers</h3>
<p>Each question has a <em>name</em> and a <em>value</em>. In my specific case, the question name is “runtime” and the default value is “1”. Because this app “api_tester.yxwz” was built specifically to test this API client, the “runtime” question will simply determine how long the app will run.</p>
<p>I would like the app to run for “3” minutes. Use <code>build_answers</code> to format the answers.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">name_values &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">name =</span> <span class="st">&quot;runtime&quot;</span>,
  <span class="dt">value =</span> <span class="st">&quot;3&quot;</span>
)
answers &lt;-<span class="st"> </span><span class="kw">build_answers</span>(name_values)</code></pre></div>
<p>If your application has multiple questions, send each as a <code>list</code> to <code>build_answers</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">name_values1 &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">name =</span> <span class="st">&quot;one&quot;</span>,
  <span class="dt">value =</span> <span class="st">&quot;1&quot;</span>
)

name_values2 &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">name =</span> <span class="st">&quot;two&quot;</span>,
  <span class="dt">value =</span> <span class="st">&quot;2&quot;</span>
)

multiple_answers &lt;-<span class="st"> </span><span class="kw">build_answers</span>(name_values1,
                                  name_values2)</code></pre></div>
</div>
<div id="queue-the-job" class="section level3">
<h3>Queue the Job</h3>
<p>Once you have the answers to the app questions you can queue the job.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">job &lt;-<span class="st"> </span><span class="kw">queue_job</span>(app, answers)</code></pre></div>
<p>The <code>job</code> will begin with status “Queued”. Poll the job using <code>get_job</code> to update the job status.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">job &lt;-<span class="st"> </span><span class="kw">get_job</span>(job)</code></pre></div>
</div>
</div>
<div id="job-output" class="section level2">
<h2>Job Output</h2>
<p>Most Alteryx jobs contain an output tool that writes data once the job is complete. Use <code>get_job_output</code> to retrieve the results as a <code>data.frame</code>. The result will be a list with one element for each valid output. ‘Valid’ in this case means an output from an Alteryx output tool that can be converted into a <code>data.frame</code>.</p>
<p>A job needs to have a “Completed” status before outputs can be retrieved.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">output &lt;-<span class="st"> </span><span class="kw">get_job_output</span>(job)</code></pre></div>
<div id="invalid-job-outputs" class="section level3">
<h3>Invalid Job Outputs</h3>
<p>All outputs cannot be properly converted to a <code>data.frame</code>. If your job contains outputs that cannot be converted, <code>get_job_output</code> will issue a warning by default and skip the ‘invalid’ outputs.</p>
<p>In order to be properly converted, your output must be written in <em>csv</em> or <em>yxdb</em> format from the Alteryx app published to Gallery.</p>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
